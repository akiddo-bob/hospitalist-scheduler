# Report Guide

How to read and validate the HTML reports generated by the scheduling tools.

## Long Call Reports

Generated by: `.venv/bin/python3 generate_report.py [count]`

Location: `output/reports/{block_start}_{block_end}/`

### Report Sections

#### Full Schedule
Day-by-day table of all long call assignments. Weekend/holiday rows are highlighted. Provider names link to their detail section.

#### Schedule by Month
The same data broken into monthly tables for easier review of specific time periods.

#### Provider Detail
The core review tool. Each provider gets a collapsible section showing their entire block schedule, color-coded:

| Color | Meaning |
|-------|---------|
| **Green rows** | Long call assigned on this day |
| **Grey rows** | Moonlighting (excluded) or non-source service |
| **Red-tinted rows** | Weeks where no long call was assigned |
| **Blue rows** | Weekend/holiday days |
| **Bold week boundaries** | Visual separation between ISO weeks |

**Badges:** LC (long call assigned), MOON (moonlighting), NON-SOURCE (non-eligible service), NO LC (missed week).

#### Provider Summary
Sortable/filterable table with each provider's key metrics:

| Column | Meaning |
|--------|---------|
| Weeks | Total non-moonlighting weeks with weekdays worked |
| Wknds | Total weekend days worked in the block |
| Standalone Wknds | Weekend-only appearances with no adjacent weekday work |
| Stretches | Number of distinct work stretches |
| Total LC | Total long calls assigned |
| Wknd LC | Weekend/holiday long calls (should be 0 or 1) |
| DC1 | Direct Care Long Call 1 assignments |
| DC2 | Direct Care Long Call 2 assignments |
| Teaching | Teaching Long Call assignments |
| Missed | Weeks with no long call assigned |
| Doubles | Weeks where they got 2 long calls |

**Key fairness check:** Total LC should be roughly equal to Weeks for each provider.

#### Weekend Long Call Pivot
Two tables: one showing every weekend/holiday LC assignment, and one showing counts per provider. Any provider with 2+ weekend LCs is flagged in red.

#### DC1 vs DC2 Balance
Shows whether each provider's DC1 and DC2 assignments are balanced. A difference of 0 or 1 is considered balanced.

#### Day of Week Distribution
Grid showing how many times each provider was assigned LC on each day (Mon–Sun). Days with 2+ assignments are highlighted — the goal is to spread across different days.

#### Teaching vs Direct Care Accuracy
Shows how often teaching providers got teaching slots and DC providers got DC slots. "DC provider assigned Teaching" should ideally be zero.

#### Flags and Violations
All flagged issues, grouped by type:

| Flag | Meaning |
|------|---------|
| CONSEC_NO_LC | Provider went 2+ consecutive weeks without a long call |
| GUARANTEED_SWAP | Provider was swapped in under the minimum-guarantee rule |
| MISSED_SWAP | Provider was swapped in to fix a 2+ missed week situation |
| DOUBLE_LONGCALL | Provider has 2 long calls in a single stretch |
| UNFILLED_SLOT | A long call slot could not be filled |
| NO_LONGCALL | A provider's work week had no long call assigned |

#### Overall Statistics
Block-level summary: total days, slots filled, unfilled slots, doubles, missed weeks, provider counts, averages.

### Table Features
Every table supports:
- **Click column headers** to sort ascending/descending
- **Type in filter boxes** under column headers to filter rows (substring match)

### Auto-Refresh
Reports poll for file changes every 2 seconds. Re-run the generator and the open browser tab automatically reloads.

---

## Block Schedule Reports

Generated by: `.venv/bin/python3 generate_block_report.py`

Location: `output/block_schedule_report_v1.html` through `v5.html`

### Report Sections

#### Monthly Calendars
Color-coded month-by-month view of all provider assignments. Each provider row shows which site they're assigned to on each day.

#### Provider Detail
Per-provider section with:
- **SVG mini-calendar** — Visual overview of the entire block at a glance
- **Site assignments** — Which site for each period
- **Stretch analysis** — Consecutive runs, spacing between stretches
- **Utilization** — Assigned vs. target weeks/weekends

#### Site Utilization Dashboard
Per-site, per-period fill rates. Shows which periods are fully staffed and which have gaps.

#### Shortfalls Tab
- **Consecutive Stretch Overrides** — Providers with 3+ consecutive weeks (shows week ranges, run length, severity)
- **Over-Assigned Providers** — Anyone exceeding fair-share target (should be zero)
- **Site Gaps** — Unfilled slots by site and period

#### Moonlighter Analysis
Which moonlighting providers were used to fill gaps, and where.

---

## Validation Checklist (Quick Pass)

For a fast review of a long call report (~10 minutes):

1. **Provider Summary** — Sort by Missed descending, scan for anyone > 1
2. **Provider Summary** — Sort by Doubles descending, click into any doubles to verify weekday+weekend split
3. **Weekend Pivot** — Check for anyone with 2+ weekend LCs
4. **Teaching vs DC** — Confirm DC→Teaching = 0 (or minimal, weekends only)
5. **Flags** — Scan UNFILLED_SLOT and CONSEC_NO_LC counts
6. **Spot-check 2 providers** — One high-week, one low-week, verify detail matches summary

For block schedule reports:

1. **Site gaps total** — Compare across variations, pick lowest
2. **Stretch overrides** — Fewer is better; all should be exactly 3 consecutive weeks
3. **Over-assigned** — Should be zero
4. **Provider detail** — Spot-check a few providers for reasonable stretch spacing

### Comparing Multiple Variations
Run the quick-pass on each variation and pick the one with fewest flags and best balance. The index page shows summary statistics for easy comparison.

---

## Automated Validation

Run: `.venv/bin/python3 validate_reports.py`

This executes 14 automated checks against all generated LC report variations. Results are categorized as PASS, WARN, or FAIL. See [Long Call Rules Reference](longcall-rules.md) for the full check list.
